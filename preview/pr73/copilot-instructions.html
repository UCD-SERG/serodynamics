<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Copilot Instructions for serodynamics • serodynamics</title><script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Copilot Instructions for serodynamics"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">serodynamics</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9046</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/dobson.html">dobson</a></li>
    <li><a class="dropdown-item" href="articles/os-snapshot-analysis.html">Analysis of OS-Specific Snapshot Variants</a></li>
    <li><a class="dropdown-item" href="articles/test-snippets.html">test-snippets</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/UCD-SERG/serodynamics/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Copilot Instructions for serodynamics</h1>
      <small class="dont-index">Source: <a href="https://github.com/UCD-SERG/serodynamics/blob/fix-runjags-issues/.github/copilot-instructions.md" class="external-link"><code>.github/copilot-instructions.md</code></a></small>
    </div>

<div id="copilot-instructions-for-serodynamics" class="section level1">

<div class="section level2">
<h2 id="repository-overview">Repository Overview<a class="anchor" aria-label="anchor" href="#repository-overview"></a></h2>
<p><strong>serodynamics</strong> is an R package for modeling longitudinal antibody responses to infection. It implements Bayesian MCMC methods using JAGS (Just Another Gibbs Sampler) to estimate antibody dynamic curve parameters including baseline concentration, peak concentration, time to peak, shape parameter, and decay rate.</p>
<ul><li>
<strong>Type</strong>: R package (statistical modeling)</li>
<li>
<strong>Size</strong>: ~121MB, ~209 files, ~76 R source files, ~1,664 lines of R code</li>
<li>
<strong>Language</strong>: R (&gt;= 4.1.0)</li>
<li>
<strong>Key Dependencies</strong>: runjags, rjags, JAGS 4.3.1, serocalculator, ggmcmc, dplyr, ggplot2</li>
<li>
<strong>Lifecycle</strong>: Experimental (under active development)</li>
</ul></div>
<div class="section level2">
<h2 id="critical-setup-requirements">Critical Setup Requirements<a class="anchor" aria-label="anchor" href="#critical-setup-requirements"></a></h2>
<div class="section level3">
<h3 id="jags-installation-required">JAGS Installation (REQUIRED)<a class="anchor" aria-label="anchor" href="#jags-installation-required"></a></h3>
<p><strong>ALWAYS install JAGS before attempting to build, test, or run this package.</strong> The package will fail without it.</p>
<ul><li>
<strong>Ubuntu/Linux</strong>: <code>sudo apt-get update &amp;&amp; sudo apt-get install -y jags</code>
</li>
<li>
<strong>macOS</strong>: Download from <a href="https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/Mac%20OS%20X/JAGS-4.3.1.pkg" class="external-link uri">https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/Mac%20OS%20X/JAGS-4.3.1.pkg</a>
</li>
<li>
<strong>Windows</strong>: Download from <a href="https://sourceforge.net/project/mcmc-jags/JAGS/4.x/Windows/JAGS-4.3.1.exe" class="external-link uri">https://sourceforge.net/project/mcmc-jags/JAGS/4.x/Windows/JAGS-4.3.1.exe</a>
</li>
</ul><p>After installing JAGS, install the R interface:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rjags"</span>, repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<p>Verify installation with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mcmc-jags.sourceforge.io" class="external-link">rjags</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ku-awdc/runjags" class="external-link">runjags</a></span><span class="op">)</span></span>
<span><span class="fu">runjags</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/runjags/man/findjags.html" class="external-link">findJAGS</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">runjags</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/runjags/man/testjags.html" class="external-link">testjags</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="build-and-development-workflow">Build and Development Workflow<a class="anchor" aria-label="anchor" href="#build-and-development-workflow"></a></h2>
<div class="section level3">
<h3 id="initial-setup">Initial Setup<a class="anchor" aria-label="anchor" href="#initial-setup"></a></h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install development dependencies</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_dev_deps</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or using the package manager approach</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="documentation-generation">Documentation Generation<a class="anchor" aria-label="anchor" href="#documentation-generation"></a></h3>
<p><strong>ALWAYS regenerate documentation after modifying roxygen2 comments in <code>.R</code> files.</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate documentation from roxygen2 comments</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Documentation files in <code>man/</code> and <code>NAMESPACE</code> are auto-generated. Do NOT edit them directly.</p>
</div>
<div class="section level3">
<h3 id="readme-updates">README Updates<a class="anchor" aria-label="anchor" href="#readme-updates"></a></h3>
<p>README.md is generated from README.Rmd. <strong>ALWAYS edit README.Rmd, never README.md directly.</strong></p>
<p>To regenerate:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span><span class="st">"README.Rmd"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="package-checking">Package Checking<a class="anchor" aria-label="anchor" href="#package-checking"></a></h3>
<p>Run R CMD check to validate the package:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Full package check (takes several minutes)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu">rcmdcheck</span><span class="fu">::</span><span class="fu"><a href="http://r-lib.github.io/rcmdcheck/reference/rcmdcheck.html" class="external-link">rcmdcheck</a></span><span class="op">(</span>error_on <span class="op">=</span> <span class="st">"note"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note</strong>: This runs multiple validation steps including examples, tests, and documentation checks. Allow 5-10 minutes for completion.</p>
</div>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a></h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run all tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_package.html" class="external-link">test_local</a></span><span class="op">(</span>stop_on_warning <span class="op">=</span> <span class="cn">TRUE</span>, stop_on_error <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Tests are located in <code>tests/testthat/</code>. The package uses testthat 3.0+ with snapshot testing for MCMC output validation. Some tests are OS-specific and skip on Windows/Linux.</p>
</div>
<div class="section level3">
<h3 id="linting">Linting<a class="anchor" aria-label="anchor" href="#linting"></a></h3>
<p>The package uses a custom lintr configuration (<code>.lintr.R</code>) with strict requirements:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lint the entire package</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint_package</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Lint specific file</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint</a></span><span class="op">(</span><span class="st">"R/filename.R"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Key linting rules</strong>: - Use <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_inform()</a></code> instead of <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> - Use <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_warn()</a></code> instead of <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> - Use <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_abort()</a></code> instead of <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code> - Use <code>::</code> instead of <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> in package code - Use native pipe <code>|&gt;</code> (configured in project.Rproj) - Follow snake_case with uppercase acronyms allowed (e.g., <code>prep_IDs</code> is valid) - Avoid <code>undesirable_function_linter</code> warnings</p>
<p>Exclusions: <code>data-raw/</code>, <code>vignettes/</code>, <code>inst/examples/</code>, and <code>inst/analyses/</code> are exempt from some linters.</p>
</div>
<div class="section level3">
<h3 id="spelling-check">Spelling Check<a class="anchor" aria-label="anchor" href="#spelling-check"></a></h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check spelling</span></span>
<span><span class="fu">spelling</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/spelling//reference/spell_check_package.html" class="external-link">spell_check_package</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Custom words are in <code>inst/WORDLIST</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="continuous-integration-ci-checks">Continuous Integration (CI) Checks<a class="anchor" aria-label="anchor" href="#continuous-integration-ci-checks"></a></h2>
<p>The following workflows run on every PR. <strong>All must pass</strong> for merge:</p>
<ol style="list-style-type: decimal"><li><p><strong>R-CMD-check.yaml</strong>: Runs R CMD check on Ubuntu (release, devel, oldrel-1), macOS (release), and Windows (release). Installs JAGS on all platforms. Fails on any NOTE. Build args include <code>--no-manual</code> and <code>--compact-vignettes=gs+qpdf</code>. (~10-15 min)</p></li>
<li><p><strong>lint-changed-files.yaml</strong>: Lints only files changed in the PR using lintr with custom <code>.lintr.R</code> config. Fails if <code>LINTR_ERROR_ON_LINT=true</code> and lints found. (~2-3 min)</p></li>
<li><p><strong>test-coverage.yaml</strong>: Runs on macOS, generates code coverage via covr, uploads to Codecov. Creates JUnit test reports. (~5-10 min)</p></li>
<li><p><strong>check-spelling.yaml</strong>: Spell checks using spelling package. (~1-2 min)</p></li>
<li><p><strong>check-readme.yaml</strong>: Renders README.Rmd and verifies it matches README.md. (~2-3 min)</p></li>
<li><p><strong>R-check-docs.yml</strong>: Runs <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygen2::roxygenise()</a></code> and checks if <code>man/</code>, <code>NAMESPACE</code>, or <code>DESCRIPTION</code> changed. Fails if documentation is out of sync. (~2-3 min)</p></li>
<li><p><strong>news.yaml</strong>: Ensures NEWS.md is updated for every PR. Can be bypassed with <code>no-changelog</code> label. (~1 min)</p></li>
<li><p><strong>version-check.yaml</strong>: Verifies DESCRIPTION version number increased vs. main branch. Run <code><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">usethis::use_version()</a></code> to increment. (~1 min)</p></li>
<li><p><strong>pkgdown.yaml</strong>: Builds pkgdown website on PR (preview), tags, and main branch pushes. Requires Quarto setup. (~5-7 min)</p></li>
</ol><div class="section level3">
<h3 id="pr-commands">PR Commands<a class="anchor" aria-label="anchor" href="#pr-commands"></a></h3>
<p>Team members can trigger actions by commenting on PRs: - <code>/document</code> - Runs <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygen2::roxygenise()</a></code> and commits changes - <code>/style</code> - Runs <code>styler::style_pkg()</code> and commits changes</p>
</div>
</div>
<div class="section level2">
<h2 id="repository-structure">Repository Structure<a class="anchor" aria-label="anchor" href="#repository-structure"></a></h2>
<div class="section level3">
<h3 id="key-directories">Key Directories<a class="anchor" aria-label="anchor" href="#key-directories"></a></h3>
<ul><li>
<p><strong>R/</strong>: Package source code (30 R files)</p>
<ul><li>
<code>Run_Mod.R</code>: Main function to run JAGS Bayesian models</li>
<li>
<code>as_case_data.R</code>: Convert data to case_data class</li>
<li>
<code>prep_data.r</code>, <code>prep_priors.R</code>: Data preparation for JAGS</li>
<li>
<code>sim_case_data.R</code>: Simulate case data for testing</li>
<li>
<code>post_summ.R</code>, <code>postprocess_jags_output.R</code>: Post-processing JAGS results</li>
<li>
<code>plot_*.R</code>: Diagnostic plotting functions (trace, density, Rhat, effective sample size)</li>
<li>
<code>serodynamics-package.R</code>: Package documentation</li>
</ul></li>
<li>
<p><strong>tests/testthat/</strong>: Unit tests (~19 test files)</p>
<ul><li>Uses snapshot testing with <code>_snaps/</code> subdirectory</li>
<li>
<code>fixtures/</code>: Test fixtures including example JAGS output</li>
<li>Most tests seed RNG for reproducibility</li>
</ul></li>
<li><p><strong>man/</strong>: Auto-generated documentation (25 .Rd files) - <strong>DO NOT EDIT</strong></p></li>
<li>
<p><strong>data/</strong>: Package datasets</p>
<ul><li>
<code>nepal_sees.rda</code>: Example SEES dataset</li>
<li>
<code>nepal_sees_jags_output.rda</code>: Pre-computed JAGS output</li>
</ul></li>
<li><p><strong>data-raw/</strong>: Raw data processing scripts (not included in package build)</p></li>
<li>
<p><strong>inst/</strong>: Installed files</p>
<ul><li>
<code>inst/extdata/</code>: JAGS model files (<code>model.jags</code>, <code>model.dobson.jags</code>), example CSV data</li>
<li>
<code>inst/examples/</code>: Example R scripts for documentation</li>
<li>
<code>inst/WORDLIST</code>: Custom spelling dictionary</li>
</ul></li>
<li>
<p><strong>vignettes/</strong>: Package vignettes</p>
<ul><li>
<code>dobson.Rmd</code>: Minimal example vignette</li>
<li>
<code>articles/</code>: Additional articles (pkgdown-only)</li>
</ul></li>
<li>
<p><strong>pkgdown/</strong>: pkgdown website configuration</p>
<ul><li>
<code>_pkgdown.yml</code>: Site structure, reference organization</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="configuration-files">Configuration Files<a class="anchor" aria-label="anchor" href="#configuration-files"></a></h3>
<ul><li>
<strong>DESCRIPTION</strong>: Package metadata, dependencies, version (0.0.0.9044)</li>
<li>
<strong>NAMESPACE</strong>: Auto-generated exports - <strong>DO NOT EDIT</strong>
</li>
<li>
<strong>.lintr.R</strong>: Custom lintr configuration (NOT <code>.lintr</code>)</li>
<li>
<strong>.Rprofile</strong>: Interactive session setup (loads devtools, conflicted, etc.)</li>
<li>
<strong>.Rbuildignore</strong>: Files excluded from package build</li>
<li>
<strong>project.Rproj</strong>: RStudio project settings (UseNativePipeOperator: Yes)</li>
<li>**_quarto.yml**: Quarto rendering configuration for vignettes</li>
<li>
<strong>codecov.yml</strong>: Code coverage thresholds (1% target)</li>
<li>
<strong>.gitignore</strong>: Git exclusions</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="common-issues-and-workarounds">Common Issues and Workarounds<a class="anchor" aria-label="anchor" href="#common-issues-and-workarounds"></a></h2>
<div class="section level3">
<h3 id="jags-not-found">JAGS Not Found<a class="anchor" aria-label="anchor" href="#jags-not-found"></a></h3>
<p><strong>Symptom</strong>: Errors like “JAGS not found” or <code><a href="https://rdrr.io/pkg/runjags/man/testjags.html" class="external-link">runjags::testjags()</a></code> fails. <strong>Solution</strong>: Install JAGS system library first (see Critical Setup Requirements), then install rjags from source.</p>
</div>
<div class="section level3">
<h3 id="tests-failing-on-specific-os">Tests Failing on Specific OS<a class="anchor" aria-label="anchor" href="#tests-failing-on-specific-os"></a></h3>
<p><strong>Symptom</strong>: Some tests fail on Windows or Linux but pass on macOS. <strong>Solution</strong>: Try to make output platform independent. As a fallback, use the <code>variant</code> option in <code><a href="https://testthat.r-lib.org/reference/expect_snapshot.html" class="external-link">testthat::expect_snapshot()</a></code>, <code><a href="https://testthat.r-lib.org/reference/expect_snapshot_value.html" class="external-link">testthat::expect_snapshot_value()</a></code>, and <code><a href="https://testthat.r-lib.org/reference/expect_snapshot_file.html" class="external-link">testthat::expect_snapshot_file()</a></code> to make snapshots platform-specific.</p>
</div>
<div class="section level3">
<h3 id="documentation-out-of-sync">Documentation Out of Sync<a class="anchor" aria-label="anchor" href="#documentation-out-of-sync"></a></h3>
<p><strong>Symptom</strong>: R-check-docs.yml workflow fails. <strong>Solution</strong>: Run <code>devtools::document()</code> locally and commit the updated <code>man/</code> and <code>NAMESPACE</code> files.</p>
</div>
<div class="section level3">
<h3 id="version-not-incremented">Version Not Incremented<a class="anchor" aria-label="anchor" href="#version-not-incremented"></a></h3>
<p><strong>Symptom</strong>: version-check.yaml workflow fails. <strong>Solution</strong>: Run <code><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">usethis::use_version()</a></code> to increment the version in DESCRIPTION.</p>
</div>
<div class="section level3">
<h3 id="newsmd-not-updated">NEWS.md Not Updated<a class="anchor" aria-label="anchor" href="#newsmd-not-updated"></a></h3>
<p><strong>Symptom</strong>: news.yaml workflow fails. <strong>Solution</strong>: Add a bullet point to NEWS.md under the development version header, or add <code>no-changelog</code> label to PR if change doesn’t warrant NEWS entry.</p>
</div>
<div class="section level3">
<h3 id="linting-failures">Linting Failures<a class="anchor" aria-label="anchor" href="#linting-failures"></a></h3>
<p><strong>Symptom</strong>: lint-changed-files.yaml fails. <strong>Solution</strong>: Review <code>.lintr.R</code> for custom rules. Common issues: - Using <code><a href="https://rdrr.io/r/base/message.html" class="external-link">message()</a></code> instead of <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_inform()</a></code> - Using <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> instead of <code>::</code> - Wrong pipe operator (use <code>|&gt;</code> not <code>%&gt;%</code>)</p>
</div>
<div class="section level3">
<h3 id="long-running-tests-timeout">Long-Running Tests Timeout<a class="anchor" aria-label="anchor" href="#long-running-tests-timeout"></a></h3>
<p><strong>Symptom</strong>: Tests timeout during CI. <strong>Solution</strong>: MCMC sampling can be slow. Tests use small iteration counts (nchain=2, nadapt=100, nburn=100, nmc=10, niter=10) to speed up. If adding new tests, follow this pattern.</p>
</div>
</div>
<div class="section level2">
<h2 id="code-style-guidelines">Code Style Guidelines<a class="anchor" aria-label="anchor" href="#code-style-guidelines"></a></h2>
<ul><li>
<strong>Follow tidyverse style guide</strong>: <a href="https://style.tidyverse.org" class="external-link uri">https://style.tidyverse.org</a>
</li>
<li>
<strong>Use native pipe</strong>: <code>|&gt;</code> not <code>%&gt;%</code>
</li>
<li>
<strong>Naming</strong>: snake_case, acronyms may be uppercase (e.g., <code>prep_IDs_data</code>)</li>
<li>
<strong>Messaging</strong>: Use <code>cli::cli_*()</code> functions for all user-facing messages</li>
<li>
<strong>No <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> in package code</strong>: Use <code>::</code> or DESCRIPTION Imports</li>
<li>
<strong>Document all exports</strong>: Use roxygen2 (@title, @description, @param, @returns, @examples)</li>
<li>
<strong>Test snapshot changes</strong>: Use <code><a href="https://testthat.r-lib.org/reference/expect_snapshot_file.html" class="external-link">testthat::announce_snapshot_file()</a></code> for CSV snapshots</li>
<li>
<strong>Seed tests</strong>: Use <code><a href="https://withr.r-lib.org/reference/with_seed.html" class="external-link">withr::local_seed()</a></code> for reproducible tests</li>
<li>
<strong>Avoid code duplication</strong>: Don’t copy-paste substantial code chunks. Instead, decompose reusable logic into well-named helper functions. This improves maintainability, testability, and reduces the risk of inconsistent behavior across similar code paths.</li>
</ul></div>
<div class="section level2">
<h2 id="package-development-commands-summary">Package Development Commands Summary<a class="anchor" aria-label="anchor" href="#package-development-commands-summary"></a></h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Complete development workflow</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span>           <span class="co"># Load package for interactive testing</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span>           <span class="co"># Update documentation</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span>               <span class="co"># Run tests</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span><span class="op">)</span>              <span class="co"># Full R CMD check (slow)</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">use_version</a></span><span class="op">(</span><span class="op">)</span>         <span class="co"># Increment version</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu"><a href="https://lintr.r-lib.org/reference/lint.html" class="external-link">lint_package</a></span><span class="op">(</span><span class="op">)</span>          <span class="co"># Check code style</span></span>
<span><span class="fu">spelling</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/spelling//reference/spell_check_package.html" class="external-link">spell_check_package</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># Check spelling</span></span>
<span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span><span class="st">"README.Rmd"</span><span class="op">)</span> <span class="co"># Update README</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="trust-these-instructions">Trust These Instructions<a class="anchor" aria-label="anchor" href="#trust-these-instructions"></a></h2>
<p>These instructions have been validated against the actual repository structure, workflows, and configuration files. When making changes:</p>
<ol style="list-style-type: decimal"><li>
<strong>ALWAYS</strong> ensure JAGS is installed before any build/test operations</li>
<li>
<strong>ALWAYS</strong> run <code>devtools::document()</code> after modifying roxygen2 comments</li>
<li>
<strong>ALWAYS</strong> edit README.Rmd (not README.md) for README changes</li>
<li>
<strong>ALWAYS</strong> increment version in DESCRIPTION for PRs</li>
<li>
<strong>ALWAYS</strong> update NEWS.md for user-facing changes</li>
<li>
<strong>ALWAYS</strong> run tests before committing (<code>devtools::test()</code>)</li>
<li>
<strong>ALWAYS</strong> check and fix lintr issues in changed files in PRs before committing</li>
<li>
<strong>ALWAYS</strong> run <code>devtools::document()</code> before requesting PR review</li>
<li>
<strong>ALWAYS</strong> make sure <code>devtools::check()</code> passes before requesting PR review</li>
<li>
<strong>ALWAYS</strong> make sure <code>devtools::spell_check()</code> passes before requesting PR review</li>
</ol><p>Only search for additional information if these instructions are incomplete or incorrect for your specific task.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Peter Teunis, Samuel Schildhauer, Kristen Aiemjoy, Douglas Ezra Morrison.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.9000.</p>
</div>

    </footer></div>





  </body></html>

